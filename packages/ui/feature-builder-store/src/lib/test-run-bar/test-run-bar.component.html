<div class="ap-flex ap-items-center ap-typography-body-2 ap-gap-2 ap-text-white">

  @if(selectedRun$ | async; as selectedRun)
  {
    @if(selectedRun.status !== instanceRunStatus.PAUSED)
    {
    <ap-state-icon  [status]="selectedRun.status"
    [showStatusText]="false"></ap-state-icon>
   }
    @switch(selectedRun.status)
    {
      @case (instanceRunStatus.SUCCEEDED) {
        <div class="ap-flex ap-flex-col ap-gap-2">
          <span i18n>Run succeeded ({{ selectedRun.id }})</span>
          <div>Took {{selectedRun.startTime | duration : selectedRun.finishTime}} </div>
        </div>
       
      }
      @case (instanceRunStatus.STOPPED) {
        <div class="ap-flex ap-flex-col ap-gap-2">
          <span i18n>Run succeeded ({{ selectedRun.id }})</span>
          <div>Took {{selectedRun.startTime | duration : selectedRun.finishTime}} </div>
        </div>
      }
      @case (instanceRunStatus.FAILED) {
        <div class="ap-flex ap-flex-col ap-gap-2">
          <span i18n>Run failed ({{ selectedRun.id }})</span>
          <div>Took {{selectedRun.startTime | duration : selectedRun.finishTime}} </div>
        </div>
      }
      @case (instanceRunStatus.RUNNING) {
        <span  i18n>Flow is running</span>
      }
      @case (instanceRunStatus.PAUSED) {
        <span  i18n>Flow is paused ...</span>
      }
      @case (instanceRunStatus.TIMEOUT) {
        <span  i18n>Run exceeded {{sandboxTimeoutSeconds$ | async}} seconds, try to optimize your
          steps.</span>
      }
      @case (instanceRunStatus.INTERNAL_ERROR) {
        <span  i18n>Run failed for an unknown reason, contact support.</span>
      }
    }
  
  }
  @else()
  {
   Initialising run...
  }
  <ap-button [hidden]="hideExit$ | async" btnColor="basic" btnStyle="basic" btnSize="medium"
     (buttonClicked)="exitButtonClicked.next()" i18n> Exit Run </ap-button>

</div>

<ng-container *ngIf="exitRun$|async"></ng-container>
