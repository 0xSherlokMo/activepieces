<div class="ap-w-full  ap-px-[30px] ap-pt-[50px]">
    <div class="ap-h-full">
        <ap-page-title title="Sync" i18n-title>
            <div underTitle class="ap-text-description ap-typography-body-2 ap ap-mt-2" i18n>
                Streamline environments management by integrating with Git repos.
            </div>
            <ap-button actionButton btnColor="primary" btnSize='medium' (buttonClicked)="configureNewRepo()">
                + Configure Repo
            </ap-button>
        </ap-page-title>
    </div>
    <table mat-table [dataSource]="dataSource" class="ap-w-[100%]" aria-label="Repos" i18n-aria-label>
        <ng-container matColumnDef="remoteUrl">
            <th mat-header-cell *matHeaderCellDef i18n>Remote URL</th>
            <td mat-cell *matCellDef="let repo">{{ repo.remoteUrl }}</td>
        </ng-container>

        <ng-container matColumnDef="branch">
            <th mat-header-cell *matHeaderCellDef i18n>Branch</th>
            <td mat-cell *matCellDef="let repo">{{ repo.branch }}</td>
        </ng-container>

        <ng-container matColumnDef="updated">
            <th mat-header-cell *matHeaderCellDef i18n>Configured</th>
            <td mat-cell *matCellDef="let repo">{{ repo.updated | date:'medium' }}</td>
        </ng-container>


        <ng-container matColumnDef="action">
            <th mat-header-cell class="!ap-text-center" *matHeaderCellDef>

            </th>
            <td mat-cell *matCellDef="let run" class="!ap-text-center">
                <button mat-icon-button (click)="$event.stopImmediatePropagation()" [matMenuTriggerFor]="menu">
                    <mat-icon>more_vert</mat-icon>
                </button>
                <mat-menu #menu="matMenu" xPosition="before">
                    <button mat-menu-item>
                        <div class="ap-flex ap-items-center ap-gap-3">
                            <svg-icon src="assets/img/custom/upload.svg" class="ap-w-[20px] ap-h-[20px]"
                                [applyClass]="true"></svg-icon>
                            <div i18n>
                                Push
                            </div>
                        </div>
                    </button>
                    <button mat-menu-item>
                        <div class="ap-flex ap-items-center ap-gap-3">
                            <svg-icon src="assets/img/custom/download.svg" class="ap-w-[20px] ap-h-[20px]"
                                [applyClass]="true"></svg-icon>
                            <div i18n>
                                Pull
                            </div>
                        </div>
                    </button>
                </mat-menu>
            </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row [class.ap-hidden]="dataSource.isLoading$ | async" *matRowDef="let row; columns: displayedColumns">
        </tr>

    </table>
    <ng-container *ngIf="(dataSource.isLoading$ | async) === true">
        <div class="ap-flex ap-items-center ap-justify-center ap-flex-grow ap-h-[500px]">
            <ap-loading-icon height="50px" width="51px" [outlineLoader]="true" [whiteLoader]="false"> </ap-loading-icon>
        </div>
    </ng-container>
    <ng-container *ngIf="dataSource.data.length===0 && (dataSource.isLoading$ | async) === false">
        <div class="ap-flex ap-items-center ap-justify-center  ap-h-full ap-h-[500px] ap-py-8" i18n>
            No repos configured yet
        </div>
    </ng-container>
</div>
<ng-container *ngIf="dialogOpened$ | async"></ng-container>