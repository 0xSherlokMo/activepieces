      <mat-form-field subscriptSizing="dynamic" class="ap-w-full" appearance="outline">
        <mat-label> {{ property.displayName }} </mat-label>
        <mat-select #matSelect [matTooltip]="property.description || ''"  [formControl]="formControl"
          (closed)="searchControl.setValue('')" [compareWith]="dropdownCompareWithFunction">
            <app-dropdown-search-control [searchControl]="searchControl"></app-dropdown-search-control>
          <ng-container
            *ngIf="(property.options.options| dropdownSearch: searchControl) | async as options">
            <cdk-virtual-scroll-viewport *ngIf="matSelect.panelOpen" [itemSize]="48" minBufferPx="200"
              maxBufferPx="400" class="ap-max-h-[195px] thin-scrollbars  ap-overflow-y-auto"
              [class.ap-h-[50px]]="options.length === 1 " [class.ap-h-[100px]]="options.length === 2 "
              [class.ap-h-[150px]]="options.length === 3 " [class.ap-h-[195px]]="options.length >= 4 ">
              <mat-option *cdkVirtualFor="let opt of options" [value]="opt.value"
                [class.mdc-list-item--selected]="opt.value === formControl.value">
                <div class="ap-w-full ap-flex ap-justify-between ap-items-center">
                  {{opt.label}}
                  <mat-pseudo-checkbox *ngIf="(opt.value === formControl.value)"
                    state="checked" aria-hidden="true" appearance="minimal"
                    class="mat-pseudo-checkbox virtual-scroll-check-mark mat-mdc-option-pseudo-checkbox mat-pseudo-checkbox-checked mat-pseudo-checkbox-minimal"></mat-pseudo-checkbox>
                </div>
              </mat-option>
            </cdk-virtual-scroll-viewport>
            <mat-option
              *ngFor="let init of (property.options.options | dropdownSelectedValues:formControl)|async "
              class="!ap-hidden" [value]="init.value">
              {{init.label}}    
            </mat-option>
            <!-- need at least 1 pre-existing option to open the select -->
            <mat-option class="!ap-hidden"></mat-option>
          </ng-container>
        </mat-select>
      </mat-form-field>
