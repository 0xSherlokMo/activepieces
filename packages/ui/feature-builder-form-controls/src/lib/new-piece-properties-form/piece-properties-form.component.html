<form [formGroup]="form" class="ap-flex  ap-flex-col">
    @for(property of sortedPropertiesByRequired | objectToArray; track property.key){

    @if(property.value.type === PropertyType.SHORT_TEXT || property.value.type === PropertyType.LONG_TEXT ||
    property.value.type === PropertyType.DATE_TIME || property.value.type === PropertyType.FILE)
    {
    <app-text-control [passedFormControl]="form.controls[property.key] | abstractFormControlCaster"
        [property]="property.value"></app-text-control>
    }

    @if(property.value.type === PropertyType.STATIC_DROPDOWN || property.value.type ===
    PropertyType.STATIC_MULTI_SELECT_DROPDOWN)
    {
    <app-static-dropdown-control [passedFormControl]="form.controls[property.key] | abstractFormControlCaster"
        [property]="property.value"></app-static-dropdown-control>
    }

    @if(property.value.type === PropertyType.DROPDOWN || property.value.type === PropertyType.MULTI_SELECT_DROPDOWN)
    {
    <app-refreshable-dropdown-control [passedFormControl]="form.controls[property.key] | abstractFormControlCaster"
        [flow]="flow" [parentFormGroup]="form" [stepName]="stepName" [pieceMetaData]="pieceMetaData"
        [propertyName]="property.key+''" [property]="property.value"></app-refreshable-dropdown-control>
    }

    @if(property.value.type === PropertyType.OAUTH2 || property.value.type === PropertyType.SECRET_TEXT ||
    property.value.type === PropertyType.BASIC_AUTH || property.value.type === PropertyType.CUSTOM_AUTH)
    {
    <app-connections-dropdown-control [passedFormControl]="form.controls[property.key] | abstractFormControlCaster"
        [options]="allConnectionsForPiece" [pieceMetaData]="pieceMetaData"
        [property]="property.value"></app-connections-dropdown-control>
    }

    @switch(property.value.type){
    @case(PropertyType.CHECKBOX){
    <app-checkbox-control [passedFormControl]="form.controls[property.key] | abstractFormControlCaster"
        [property]="property.value"></app-checkbox-control>
    break;
    }
    @case(PropertyType.JSON)
    {
    <app-json-control [passedFormControl]="form.controls[property.key] | abstractFormControlCaster"
        [property]="property.value"></app-json-control>
    break;
    }
    @case(PropertyType.MARKDOWN)
    {
    break;
    }
    @case(PropertyType.OBJECT)
    {
    <app-dictonary-form-control
        [formControl]="form.controls[property.key] | abstractFormControlCaster"></app-dictonary-form-control>
    break;
    }
    }

    }



</form>