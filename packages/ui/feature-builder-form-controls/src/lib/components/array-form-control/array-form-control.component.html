<div class="ap-flex ap-flex-col">
  <div class="ap-mb-2 ap-flex ap-justify-between ap-items-center">
    <div class="ap-select-none">
      {{ property.displayName }}
    </div>
    <ng-container *ngTemplateOutlet="dynamicInputTemplate"></ng-container>
  </div>
  <div cdkDropList [cdkDropListData]="formArray.controls" (cdkDropListDropped)="drop($event)" class="drag-list" > 
    @for (objectControl of formArray.controls; track objectControl; let idx =
    $index; let isFirst = $first; let isLast = $last) {
    <div class="ap-mb-4" >
      <app-array-form-control-text-item [class.ap-mb-4]="!isLast" [idx]="idx" [control]="formArray.controls[idx] | abstractFormControlCaster"
        [hideTooltip]="isAnItemBeingDragged" (itemDragStateChanged)="isAnItemBeingDragged = $event"
        (removeValue)="remove($event)"></app-array-form-control-text-item>
    </div>
    } @empty {
    <div class="ap-border-dashed ap-border-2 ap-border-gray-500 ap-rounded ap-p-3 ap-text-center">
      The list is empty
    </div>
    } 
  </div>
  @if (formArray.enabled) {
    <ap-button btnColor="primary" btnStyle="basic" (buttonClicked)="addValue()" type="button" btnSize="medium">
      + Add Item
    </ap-button>
    }
  <div class="ap-flex-grow" #spacer></div>
</div>
@if (updateValueOnChange$ | async) {}